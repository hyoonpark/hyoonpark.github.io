---
layout: post
title: "[Network] 캡슐화와 역캡슐화"
date: 2025-05-13 14:00 +09:00
categories: cs network
tags: [github, tech, blog, network, 캡슐화, 역캡슐화, encapsulation, decapsulation]
---

> **3줄 요약**
<br>캡슐화는 송신 시 계층별 헤더를 덧붙이는 과정, 역캡슐화는 수신 시 헤더를 제거하는 과정
<br>메시지는 송신지에서 상위 계층 → 하위 계층, 수신지에서 하위 계층 → 상위 계층으로 이동
<br>PDU(Protocol Data Unit)는 각 계층에서의 전송 단위로, 헤더 포함 데이터 구조를 의미함
{: .prompt-tip }

# 💻 컴퓨터 네트워크 시리즈

> 이 시리즈는 『혼자 공부하는 네트워크』 (강민철 저)
> <br> + 인프런 강의를 기반으로 **개인적으로 복습 및 정리한 기록**입니다.

---

## 📌 캡슐화와 역캡슐화란?

- 네트워크에서 **송신지 → 수신지**로 메시지가 전달되는 동안, 계층을 따라 이동하며 **헤더를 추가하거나 제거하는 과정**
- 각 계층의 **역할에 따라 제어 정보를 추가**하며 하위 계층으로 내려감 (캡슐화)
- 수신 측에서는 반대로 **헤더를 제거하면서 상위 계층으로 전달** (역캡슐화)

---

## 📥 캡슐화 (Encapsulation)

- 송신 측에서 **상위 계층 → 하위 계층**으로 데이터가 이동하며, 각 계층이 **자신의 헤더**(+ 경우에 따라 트레일러)를 붙이는 과정
- 상위 계층의 데이터를 **페이로드(payload)**로 간주하여 헤더를 덧붙이고 다음 계층으로 전달

### 예시 구조:

```
[상위 계층 데이터]
 → [헤더3 + 상위 계층 데이터]
 → [헤더2 + 헤더3 + 데이터]
 → [헤더1 + 헤더2 + 헤더3 + 데이터] (하위 계층으로 전달)
```

---

## 📤 역캡슐화 (Decapsulation)

- 수신 측에서 **하위 계층 → 상위 계층**으로 데이터가 이동하며, 각 계층에서 자신이 붙인 **헤더를 확인하고 제거**
- 최종적으로 **응용 계층 데이터만 남아 응용 프로그램에 전달**

---

## 📦 PDU (Protocol Data Unit)

- **각 계층에서 송수신되는 데이터의 단위**
- PDU는 해당 계층의 **헤더 + 상위 계층의 PDU**로 구성  

<div style="text-align: left;">
  <img src="assets/img/cs/pdu.png" alt="PDU" style="width: 70%;"/>
  <sub>출처: 『혼자 공부하는 네트워크』 - 강민철 저</sub>
</div>
- 예시:
  - 전송 계층 PDU → 세그먼트(segment)
  - 네트워크 계층 PDU → 패킷(packet)
  - 링크 계층 PDU → 프레임(frame)

---

## 🖼️ 캡슐화/역캡슐화 과정 시각화

![캡슐화, 역캡슐화 과정](assets/img/cs/capsulation.png)
<sub>출처: 『혼자 공부하는 네트워크』 - 강민철 저</sub>  

cf) OSI 7계층, TCP/IP 4계층은 사실 아무것도 해 주지 않는다  
> “참조” 모델이기 때문에 네트워크를 작동시키는 주체가 아니다!  
> 네트워크 참조 모델에 **속한 프로토콜과 네트워크 장비**가 네트워크를 작동시키는 주체이다!

---

## ⚙️ 네트워크 성능 지표

### 트래픽 (Traffic)
- 특정 시점에 네트워크를 통해 **전송되는 데이터의 양**
- 트래픽이 과도할 경우 → 지연, 병목, 패킷 손실 발생 가능

### 처리율 (Throughput)
- 단위 시간당 실제로 전송된 **데이터의 양**
- 트래픽이 많아도 처리율이 낮다면 **네트워크 성능 저하**

### 대역폭 (Bandwidth)
- 단위 시간 동안 통신 매체를 통해 **전송 가능한 최대 데이터 양**

### 패킷 손실 (Packet Loss)
- 전송 중에 **손실된 패킷의 비율**
- 주로 트래픽 과부하, 링크 오류, 버퍼 부족 등으로 발생

---

## ✅ 마무리 정리

캡슐화와 역캡슐화는 네트워크 통신에서 **계층적 구조의 핵심 개념**으로,  
각 계층의 역할과 프로토콜에 따라 **메시지가 포장되고 해제되는 과정**  
이해를 바탕으로 네트워크 문제 발생 시 **원인을 계층별로 진단**

---

## 📚 참고 자료

- 『혼자 공부하는 네트워크』 - 강민철 저  
- [인프런 강의 - 혼자 공부하는 네트워크 기반 강의](https://www.inflearn.com/course/%EA%B0%9C%EB%B0%9C%EC%9E%90-%EC%BB%B4%ED%93%A8%ED%84%B0%EA%B3%B5%ED%95%99-%ED%98%BC%EC%9E%90%EA%B3%B5%EB%B6%80%ED%95%98%EB%8A%94-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC)  
{: target="_blank"}

---

읽어주셔서 감사합니다 🙌  
내용이 도움이 되었거나, 틀린 부분이 있다면 댓글이나 GitHub Issue로 알려주세요 😊
